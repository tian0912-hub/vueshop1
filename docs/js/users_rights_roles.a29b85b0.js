(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["users_rights_roles"],{"014b":function(e,t,r){"use strict";var n=r("e53d"),a=r("07e3"),s=r("8e60"),i=r("63b6"),o=r("9138"),l=r("ebfd").KEY,c=r("294c"),u=r("dbdb"),d=r("45f2"),f=r("62a0"),m=r("5168"),p=r("ccb9"),h=r("6718"),b=r("47ee"),g=r("9003"),v=r("e4ae"),y=r("f772"),w=r("241e"),x=r("36c3"),k=r("1bc3"),R=r("aebd"),$=r("a159"),_=r("0395"),F=r("bf0b"),S=r("9aa9"),D=r("d9f6"),O=r("c3a1"),L=F.f,I=D.f,j=_.f,C=n.Symbol,N=n.JSON,V=N&&N.stringify,E="prototype",T=m("_hidden"),A=m("toPrimitive"),P={}.propertyIsEnumerable,q=u("symbol-registry"),z=u("symbols"),U=u("op-symbols"),B=Object[E],M="function"==typeof C&&!!S.f,H=n.QObject,G=!H||!H[E]||!H[E].findChild,J=s&&c((function(){return 7!=$(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=L(B,t);n&&delete B[t],I(e,t,r),n&&e!==B&&I(B,t,n)}:I,K=function(e){var t=z[e]=$(C[E]);return t._k=e,t},W=M&&"symbol"==typeof C.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof C},Z=function(e,t,r){return e===B&&Z(U,t,r),v(e),t=k(t,!0),v(r),a(z,t)?(r.enumerable?(a(e,T)&&e[T][t]&&(e[T][t]=!1),r=$(r,{enumerable:R(0,!1)})):(a(e,T)||I(e,T,R(1,{})),e[T][t]=!0),J(e,t,r)):I(e,t,r)},Y=function(e,t){v(e);var r,n=b(t=x(t)),a=0,s=n.length;while(s>a)Z(e,r=n[a++],t[r]);return e},Q=function(e,t){return void 0===t?$(e):Y($(e),t)},X=function(e){var t=P.call(this,e=k(e,!0));return!(this===B&&a(z,e)&&!a(U,e))&&(!(t||!a(this,e)||!a(z,e)||a(this,T)&&this[T][e])||t)},ee=function(e,t){if(e=x(e),t=k(t,!0),e!==B||!a(z,t)||a(U,t)){var r=L(e,t);return!r||!a(z,t)||a(e,T)&&e[T][t]||(r.enumerable=!0),r}},te=function(e){var t,r=j(x(e)),n=[],s=0;while(r.length>s)a(z,t=r[s++])||t==T||t==l||n.push(t);return n},re=function(e){var t,r=e===B,n=j(r?U:x(e)),s=[],i=0;while(n.length>i)!a(z,t=n[i++])||r&&!a(B,t)||s.push(z[t]);return s};M||(C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(r){this===B&&t.call(U,r),a(this,T)&&a(this[T],e)&&(this[T][e]=!1),J(this,e,R(1,r))};return s&&G&&J(B,e,{configurable:!0,set:t}),K(e)},o(C[E],"toString",(function(){return this._k})),F.f=ee,D.f=Z,r("6abf").f=_.f=te,r("355d").f=X,S.f=re,s&&!r("b8e3")&&o(B,"propertyIsEnumerable",X,!0),p.f=function(e){return K(m(e))}),i(i.G+i.W+i.F*!M,{Symbol:C});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ae=0;ne.length>ae;)m(ne[ae++]);for(var se=O(m.store),ie=0;se.length>ie;)h(se[ie++]);i(i.S+i.F*!M,"Symbol",{for:function(e){return a(q,e+="")?q[e]:q[e]=C(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in q)if(q[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),i(i.S+i.F*!M,"Object",{create:Q,defineProperty:Z,defineProperties:Y,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:re});var oe=c((function(){S.f(1)}));i(i.S+i.F*oe,"Object",{getOwnPropertySymbols:function(e){return S.f(w(e))}}),N&&i(i.S+i.F*(!M||c((function(){var e=C();return"[null]"!=V([e])||"{}"!=V({a:e})||"{}"!=V(Object(e))}))),"JSON",{stringify:function(e){var t,r,n=[e],a=1;while(arguments.length>a)n.push(arguments[a++]);if(r=t=n[1],(y(t)||void 0!==e)&&!W(e))return g(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!W(t))return t}),n[1]=t,V.apply(N,n)}}),C[E][A]||r("35e8")(C[E],A,C[E].valueOf),d(C,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},"0395":function(e,t,r){var n=r("36c3"),a=r("6abf").f,s={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(e){try{return a(e)}catch(t){return i.slice()}};e.exports.f=function(e){return i&&"[object Window]"==s.call(e)?o(e):a(n(e))}},"04b2":function(e,t,r){},"0539":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("权限管理")]),r("el-breadcrumb-item",[e._v("角色列表")])],1),r("el-card",[r("el-row",[r("el-col",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加角色")])],1)],1),r("el-table",{attrs:{data:e.rolelist,border:"",stripe:"","row-key":"id"}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,(function(n,a){return r("el-row",{key:n.id,class:["bdbottom",0===a?"bdtop":"","vcenter"]},[r("el-col",{attrs:{span:5}},[r("el-tag",{attrs:{closable:""},on:{close:function(r){return e.removeRightById(t.row,n.id)}}},[e._v(e._s(n.authName))]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:19}},e._l(n.children,(function(n,a){return r("el-row",{key:n.id,class:[0===a?"":"bdtop","vcenter"]},[r("el-col",{attrs:{span:6}},[r("el-tag",{attrs:{type:"success",closable:""},on:{close:function(r){return e.removeRightById(t.row,n.id)}}},[e._v(e._s(n.authName))]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:18}},e._l(n.children,(function(n){return r("el-tag",{key:n.id,attrs:{type:"warning",closable:""},on:{close:function(r){return e.removeRightById(t.row,n.id)}}},[e._v(e._s(n.authName))])})),1)],1)})),1)],1)}))}}])}),r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),r("el-table-column",{attrs:{label:"角色描述",prop:"roleDesc"}}),r("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(r){return e.showEditDialog(t.row.id)}}},[e._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.removeUserById(t.row.id)}}},[e._v("删除")]),r("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-setting"},on:{click:function(r){return e.showSetRightDialog(t.row)}}},[e._v("分配权限")])]}}])})],1),r("el-dialog",{attrs:{title:e.title,visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[r("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"角色名",prop:"roleName"}},[r("el-input",{model:{value:e.addForm.roleName,callback:function(t){e.$set(e.addForm,"roleName",t)},expression:"addForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[r("el-input",{model:{value:e.addForm.roleDesc,callback:function(t){e.$set(e.addForm,"roleDesc",t)},expression:"addForm.roleDesc"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"分配权限",visible:e.setRightDialogVisible,width:"50%"},on:{"update:visible":function(t){e.setRightDialogVisible=t},close:e.setRightDialogClosed}},[r("el-tree",{ref:"treeRef",attrs:{data:e.rightslist,props:e.treeProps,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":e.checkedNodes}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.setRightDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.allotRights}},[e._v("确 定")])],1)],1)],1)],1)},a=[],s=r("a745");function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e){if(s(e))return i(e)}var l=r("67bb"),c=r("c8bb"),u=r("774e");function d(e){if("undefined"!==typeof l&&c(Object(e)))return u(e)}function f(e,t){if(e){if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?u(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e){return o(e)||d(e)||f(e)||m()}r("ac6a"),r("96cf");var h=r("3b8d"),b={data:function(){return{rolelist:[],setRightDialogVisible:!1,rightslist:[],checkedNodes:[],treeProps:{label:"authName",children:"children"},rolesId:"",addDialogVisible:!1,addForm:{roleName:"",roleDesc:""},addFormRules:{roleName:[{required:!0,message:"请输入角色名",trigger:"blur"},{min:3,max:10,message:"角色名的长度在3~10个字符之间",trigger:"blur"}],roleDesc:[{min:6,max:15,message:"角色描述信息的长度在6~15个字符之间",trigger:"blur"}]}}},created:function(){this.getRolesList()},computed:{title:function(){return this.addForm.roleId?"编辑角色":"新增角色"}},methods:{getRolesList:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("roles");case 2:if(t=e.sent,r=t.data,200===r.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("获取角色列表数据失败"));case 6:this.rolelist=r.data;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showSetRightDialog:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.rolesId=t.id,e.next=3,this.$http.get("rights/tree");case 3:if(r=e.sent,n=r.data,200===n.meta.status){e.next=7;break}return e.abrupt("return",this.$message.error("获取权限列表失败"));case 7:this.rightslist=n.data,this.getRolesHasRights(t,this.checkedNodes),this.setRightDialogVisible=!0;case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getRolesHasRights:function(e,t){var r=this;if(!e.children)return t.push(e.id);e.children.forEach((function(e){return r.getRolesHasRights(e,t)}))},removeRightById:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(n=e.sent,"confirm"===n){e.next=5;break}return e.abrupt("return",this.$message.info("取消了删除！"));case 5:return e.next=7,this.$http.delete("roles/".concat(t.id,"/rights/").concat(r));case 7:if(a=e.sent,s=a.data,200===s.meta.status){e.next=11;break}return e.abrupt("return",this.$message.error("取消权限失败"));case 11:this.$message.success("取消权限成功"),this.getRolesList();case 13:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),showEditDialog:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("roles/".concat(t));case 2:if(r=e.sent,n=r.data,200===n.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("获取角色信息失败"));case 6:this.addForm=n.data,this.addDialogVisible=!0,this.addFormRules.password=[];case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),removeUserById:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(r=e.sent,"confirm"===r){e.next=7;break}this.$message.info("取消删除"),e.next=15;break;case 7:return e.next=9,this.$http.delete("roles/".concat(t));case 9:if(n=e.sent,a=n.data,200===a.meta.status){e.next=13;break}return e.abrupt("return",this.$message.error("删除角色失败"));case 13:this.$message.success("删除角色成功"),this.getRolesList();case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),setRightDialogClosed:function(){this.checkedNodes=[],this.$refs.treeRef.setCheckedKeys([])},allotRights:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[].concat(p(this.$refs.treeRef.getCheckedKeys()),p(this.$refs.treeRef.getHalfCheckedKeys())),r=t.join(","),e.next=4,this.$http.post("roles/".concat(this.rolesId,"/rights"),{rids:r});case 4:if(n=e.sent,a=n.data,200===a.meta.status){e.next=8;break}return e.abrupt("return",this.$message.error("分配权限失败！"));case 8:this.$message.success("分配权限成功！"),this.getRolesList(),this.setRightDialogVisible=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addDialogClosed:function(){this.$refs.addFormRef.resetFields(),this.addForm={roleName:"",roleDesc:""}},addUser:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(r){var n,a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",e.$message.error("请输入合法信息"));case 2:if(e.addForm.roleId){t.next=11;break}return t.next=5,e.$http.post("roles",e.addForm);case 5:if(n=t.sent,a=n.data,201===a.meta.status){t.next=9;break}return t.abrupt("return",e.$message.error("创建角色失败"));case 9:t.next=17;break;case 11:return t.next=13,e.$http.put("roles/".concat(e.addForm.roleId),e.addForm);case 13:if(s=t.sent,i=s.data,200===i.meta.status){t.next=17;break}return t.abrupt("return",e.$message.error("编辑角色失败"));case 17:e.addDialogVisible=!1,e.$message.success("".concat(e.title,"成功")),e.getRolesList();case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},g=b,v=(r("f348"),r("2877")),y=Object(v["a"])(g,n,a,!1,null,"699633d7",null);t["default"]=y.exports},"18c4":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用户管理")]),r("el-breadcrumb-item",[e._v("用户列表")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getUserList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加用户")])],1)],1),r("el-table",{attrs:{data:e.userlist,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{label:"姓名",prop:"username"}}),r("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),r("el-table-column",{attrs:{label:"电话",prop:"mobile"}}),r("el-table-column",{attrs:{label:"角色",prop:"role_name"}}),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{on:{change:function(r){return e.userStateChanged(t.row)}},model:{value:t.row.mg_state,callback:function(r){e.$set(t.row,"mg_state",r)},expression:"scope.row.mg_state"}})]}}])}),r("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.id)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.removeUserById(t.row.id)}}}),r("el-tooltip",{attrs:{effect:"dark",content:"分配角色",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.setRole(t.row)}}})],1)]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:e.title,visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[r("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.addForm.id,expression:"!addForm.id"}],attrs:{label:"密码",prop:"password"}},[r("el-input",{model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1),r("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[r("el-input",{model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",t)},expression:"addForm.mobile"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"分配角色",visible:e.setRoleDialogVisible,width:"50%"},on:{"update:visible":function(t){e.setRoleDialogVisible=t},close:e.setRoleDialogClosed}},[r("div",[r("p",[e._v("当前的用户："+e._s(e.userInfo.username))]),r("p",[e._v("当前的角色："+e._s(e.userInfo.role_name))]),r("p",[e._v("分配新角色：\n        "),r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedRoleId,callback:function(t){e.selectedRoleId=t},expression:"selectedRoleId"}},e._l(e.rolesList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})})),1)],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.setRoleDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.btnRoleInfo}},[e._v("确 定")])],1)])],1)},a=[],s=(r("96cf"),r("3b8d")),i={data:function(){var e=function(e,t,r){var n=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/;if(n.test(t))return r();r(new Error("请输入合法的邮箱"))},t=function(e,t,r){var n=/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;if(n.test(t))return r();r(new Error("请输入合法的手机号"))};return{queryInfo:{query:"",pagenum:1,pagesize:5},total:0,userlist:[],addDialogVisible:!1,addForm:{username:"",password:"",email:"",mobile:""},addFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"用户名的长度在3~10个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"用户名的长度在6~15个字符之间",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:t,trigger:"blur"}]},setRoleDialogVisible:!1,userInfo:{},rolesList:[],selectedRoleId:""}},created:function(){this.getUserList()},computed:{title:function(){return this.addForm.id?"编辑用户":"新增用户"}},methods:{getUserList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("users",{params:this.queryInfo});case 2:if(t=e.sent,r=t.data,200===r.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("获取用户列表失败"));case 6:this.total=r.data.total,this.userlist=r.data.users;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showEditDialog:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("users/".concat(t));case 2:if(r=e.sent,n=r.data,200===n.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("获取用户信息失败"));case 6:this.addForm=n.data,console.log(this.addForm),this.addDialogVisible=!0,this.addFormRules.password=[];case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),removeUserById:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(r=e.sent,"confirm"===r){e.next=7;break}this.$message.info("取消删除"),e.next=15;break;case 7:return e.next=9,this.$http.delete("users/".concat(t));case 9:if(n=e.sent,a=n.data,200===a.meta.status){e.next=13;break}return e.abrupt("return",this.$message.error("删除用户失败"));case 13:this.$message.success("删除用户成功"),this.getUserList();case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),setRole:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.userInfo=t,e.next=3,this.$http.get("roles");case 3:if(r=e.sent,n=r.data,200===n.meta.status){e.next=7;break}return e.abrupt("return",this.$message.error("获取角色列表失败！"));case 7:this.rolesList=n.data,this.setRoleDialogVisible=!0;case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getUserList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getUserList()},userStateChanged:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.put("users/".concat(t.id,"/state/").concat(t.mg_state));case 2:if(r=e.sent,n=r.data,200===n.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("修改用户状态失败"));case 6:this.$message.success("修改用户状态成功");case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addDialogClosed:function(){this.$refs.addFormRef.resetFields(),this.addForm={username:"",password:"",email:"",mobile:""}},addUser:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var n,a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",e.$message.error("请输入合法信息"));case 2:if(e.addForm.id){t.next=11;break}return t.next=5,e.$http.post("users",e.addForm);case 5:if(n=t.sent,a=n.data,201===a.meta.status){t.next=9;break}return t.abrupt("return",e.$message.error("创建用户失败"));case 9:t.next=17;break;case 11:return t.next=13,e.$http.put("users/".concat(e.addForm.id),e.addForm);case 13:if(s=t.sent,i=s.data,200===i.meta.status){t.next=17;break}return t.abrupt("return",e.$message.error("编辑用户失败"));case 17:e.addDialogVisible=!1,e.$message.success("".concat(e.title,"成功")),e.getUserList();case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},btnRoleInfo:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectedRoleId){e.next=2;break}return e.abrupt("return",this.$message.error("请选择要分配的角色！"));case 2:return e.next=4,this.$http.put("users/".concat(this.userInfo.id,"/role"),{rid:this.selectedRoleId});case 4:if(t=e.sent,r=t.data,200===r.meta.status){e.next=8;break}return e.abrupt("return",this.$message.error("更新角色失败！"));case 8:this.$message.success("更新角色成功！"),this.getUserList(),this.setRoleDialogVisible=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setRoleDialogClosed:function(){this.selectedRoleId="",this.userInfo={}}}},o=i,l=r("2877"),c=Object(l["a"])(o,n,a,!1,null,"32a086f6",null);t["default"]=c.exports},"1af6":function(e,t,r){var n=r("63b6");n(n.S,"Array",{isArray:r("9003")})},"20fd":function(e,t,r){"use strict";var n=r("d9f6"),a=r("aebd");e.exports=function(e,t,r){t in e?n.f(e,t,a(0,r)):e[t]=r}},"355d":function(e,t){t.f={}.propertyIsEnumerable},"47ee":function(e,t,r){var n=r("c3a1"),a=r("9aa9"),s=r("355d");e.exports=function(e){var t=n(e),r=a.f;if(r){var i,o=r(e),l=s.f,c=0;while(o.length>c)l.call(e,i=o[c++])&&t.push(i)}return t}},"549b":function(e,t,r){"use strict";var n=r("d864"),a=r("63b6"),s=r("241e"),i=r("b0dc"),o=r("3702"),l=r("b447"),c=r("20fd"),u=r("7cd6");a(a.S+a.F*!r("4ee1")((function(e){Array.from(e)})),"Array",{from:function(e){var t,r,a,d,f=s(e),m="function"==typeof this?this:Array,p=arguments.length,h=p>1?arguments[1]:void 0,b=void 0!==h,g=0,v=u(f);if(b&&(h=n(h,p>2?arguments[2]:void 0,2)),void 0==v||m==Array&&o(v))for(t=l(f.length),r=new m(t);t>g;g++)c(r,g,b?h(f[g],g):f[g]);else for(d=v.call(f),r=new m;!(a=d.next()).done;g++)c(r,g,b?i(d,h,[a.value,g],!0):a.value);return r.length=g,r}})},"54a1":function(e,t,r){r("6c1c"),r("1654"),e.exports=r("95d5")},6718:function(e,t,r){var n=r("e53d"),a=r("584a"),s=r("b8e3"),i=r("ccb9"),o=r("d9f6").f;e.exports=function(e){var t=a.Symbol||(a.Symbol=s?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:i.f(e)})}},"67bb":function(e,t,r){e.exports=r("f921")},"69d3":function(e,t,r){r("6718")("asyncIterator")},"6abf":function(e,t,r){var n=r("e6f3"),a=r("1691").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,a)}},"765d":function(e,t,r){r("6718")("observable")},"774e":function(e,t,r){e.exports=r("d2d5")},9003:function(e,t,r){var n=r("6b4c");e.exports=Array.isArray||function(e){return"Array"==n(e)}},"95d5":function(e,t,r){var n=r("40c3"),a=r("5168")("iterator"),s=r("481b");e.exports=r("584a").isIterable=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||s.hasOwnProperty(n(t))}},"9aa9":function(e,t){t.f=Object.getOwnPropertySymbols},a745:function(e,t,r){e.exports=r("f410")},ac6a:function(e,t,r){for(var n=r("cadf"),a=r("0d58"),s=r("2aba"),i=r("7726"),o=r("32e9"),l=r("84f2"),c=r("2b4c"),u=c("iterator"),d=c("toStringTag"),f=l.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=a(m),h=0;h<p.length;h++){var b,g=p[h],v=m[g],y=i[g],w=y&&y.prototype;if(w&&(w[u]||o(w,u,f),w[d]||o(w,d,g),l[g]=f,v))for(b in n)w[b]||s(w,b,n[b],!0)}},bf0b:function(e,t,r){var n=r("355d"),a=r("aebd"),s=r("36c3"),i=r("1bc3"),o=r("07e3"),l=r("794b"),c=Object.getOwnPropertyDescriptor;t.f=r("8e60")?c:function(e,t){if(e=s(e),t=i(t,!0),l)try{return c(e,t)}catch(r){}if(o(e,t))return a(!n.f.call(e,t),e[t])}},c1b5:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("权限管理")]),r("el-breadcrumb-item",[e._v("权限列表")])],1),r("el-card",[r("el-table",{attrs:{data:e.rightsList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"#"}}),r("el-table-column",{attrs:{label:"权限名称",prop:"authName"}}),r("el-table-column",{attrs:{label:"路径",prop:"path"}}),r("el-table-column",{attrs:{label:"权限等级",prop:"level"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.level?r("el-tag",[e._v("一级")]):"1"===t.row.level?r("el-tag",{attrs:{type:"success"}},[e._v("二级")]):r("el-tag",{attrs:{type:"warning"}},[e._v("三级")])]}}])})],1)],1)],1)},a=[],s=(r("96cf"),r("3b8d")),i={data:function(){return{rightsList:[]}},created:function(){this.getRightsList()},methods:{getRightsList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rights/list");case 2:if(t=e.sent,r=t.data,200===r.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("获取权限列表失败"));case 6:this.rightsList=r.data;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},o=i,l=r("2877"),c=Object(l["a"])(o,n,a,!1,null,"5d2e7850",null);t["default"]=c.exports},c8bb:function(e,t,r){e.exports=r("54a1")},ccb9:function(e,t,r){t.f=r("5168")},d2d5:function(e,t,r){r("1654"),r("549b"),e.exports=r("584a").Array.from},ebfd:function(e,t,r){var n=r("62a0")("meta"),a=r("f772"),s=r("07e3"),i=r("d9f6").f,o=0,l=Object.isExtensible||function(){return!0},c=!r("294c")((function(){return l(Object.preventExtensions({}))})),u=function(e){i(e,n,{value:{i:"O"+ ++o,w:{}}})},d=function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,n)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[n].i},f=function(e,t){if(!s(e,n)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[n].w},m=function(e){return c&&p.NEED&&l(e)&&!s(e,n)&&u(e),e},p=e.exports={KEY:n,NEED:!1,fastKey:d,getWeak:f,onFreeze:m}},f348:function(e,t,r){"use strict";r("04b2")},f410:function(e,t,r){r("1af6"),e.exports=r("584a").Array.isArray},f921:function(e,t,r){r("014b"),r("c207"),r("69d3"),r("765d"),e.exports=r("584a").Symbol}}]);
//# sourceMappingURL=users_rights_roles.a29b85b0.js.map